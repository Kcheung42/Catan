{"version":3,"sources":["catan_board/views/hex.cljs"],"mappings":"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","names":["catan-board.views.hex/resource-pattern","catan-board.views.hex/hex-tile","hex-data","map__14354","cljs.core/--destructure-map","cljs.core.get","vec__14355","cljs.core.nth","coord","resource","number","hex-size","catan-board.db/hex-size","vertices","catan-board.utils.hex/hex-vertices","points","catan-board.utils.hex/vertices-to-svg-points","cx","cy","catan-board.utils.hex/hex-center","fill","cljs.core/name","catan-board.utils.resources/get-resource-color","cljs.core/first","cljs.core/second","cljs.core._EQ_","is-red?","catan-board.utils.numbers/is-red-number?","pips","catan-board.utils.numbers/get-probability-pips","iter__5480__auto__","s__14359","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__14361","cljs.core/chunk-buffer","i__14360","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__14358","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","i","cljs.core.range","catan-board.views.hex/harbor-icon","harbor-data","map__14362","vec__14363","vec__14366","vec__14369","edge","direction","type","land-hex","coord1","coord2","x1","y1","catan-board.utils.hex/axial-to-pixel","x2","y2","mid-x","mid-y","ratio","catan-board.utils.harbors/get-harbor-ratio","color","catan-board.utils.harbors/get-harbor-color","resource-icon","cljs.core.not_EQ_","G__14372","cljs.core/Keyword","catan-board.views.hex/hex-grid","hexes","harbors","all-coords","cljs.core.map","all-pixels","p1__14373#","min-x","cljs.core.apply","cljs.core/min","max-x","cljs.core/max","min-y","max-y","padding","view-x","view-y","view-width","view-height","s__14375","b__14377","i__14376","iter__14374","s__14379","b__14381","i__14380","iter__14378","cljs.core/chunk-first"],"sourcesContent":["(ns catan-board.views.hex\n  (:require\n   [catan-board.utils.hex :as hex-utils]\n   [catan-board.utils.resources :as resources]\n   [catan-board.utils.numbers :as numbers]\n   [catan-board.utils.harbors :as harbors]\n   [catan-board.db :as db]))\n\n(defn resource-pattern\n  \"Creates SVG pattern definitions for resource textures\"\n  []\n  [:defs\n   ;; Wood pattern - larger trees\n   [:pattern {:id \"wood-pattern\" :width 20 :height 20 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 20 :height 20 :fill \"#2d5016\"}]\n    ;; Tree 1\n    [:polygon {:points \"4,12 7,3 10,12\" :fill \"#1a3010\"}]\n    [:rect {:x 6 :y 12 :width 2 :height 4 :fill \"#0d1808\"}]\n    ;; Tree 2\n    [:polygon {:points \"14,8 17,0 20,8\" :fill \"#1a3010\"}]\n    [:rect {:x 16 :y 8 :width 2 :height 3 :fill \"#0d1808\"}]]\n\n   ;; Brick pattern - larger brick wall\n   [:pattern {:id \"brick-pattern\" :width 20 :height 12 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 20 :height 12 :fill \"#b8543c\"}]\n    ;; Top row of bricks\n    [:rect {:x 0 :y 0 :width 10 :height 6 :fill \"none\" :stroke \"#8b3c2c\" :stroke-width 1.5}]\n    [:rect {:x 10 :y 0 :width 10 :height 6 :fill \"none\" :stroke \"#8b3c2c\" :stroke-width 1.5}]\n    ;; Bottom row of bricks (offset)\n    [:rect {:x -5 :y 6 :width 10 :height 6 :fill \"none\" :stroke \"#8b3c2c\" :stroke-width 1.5}]\n    [:rect {:x 5 :y 6 :width 10 :height 6 :fill \"none\" :stroke \"#8b3c2c\" :stroke-width 1.5}]\n    [:rect {:x 15 :y 6 :width 10 :height 6 :fill \"none\" :stroke \"#8b3c2c\" :stroke-width 1.5}]]\n\n   ;; Wheat pattern - diagonal lines\n   [:pattern {:id \"wheat-pattern\" :width 8 :height 8 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 8 :height 8 :fill \"#e8c547\"}]\n    [:line {:x1 0 :y1 0 :x2 8 :y2 8 :stroke \"#d4a730\" :stroke-width 1}]\n    [:line {:x1 -2 :y1 6 :x2 2 :y2 10 :stroke \"#d4a730\" :stroke-width 1}]\n    [:line {:x1 6 :y1 -2 :x2 10 :y2 2 :stroke \"#d4a730\" :stroke-width 1}]]\n\n   ;; Sheep pattern - cute little sheep\n   [:pattern {:id \"sheep-pattern\" :width 20 :height 20 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 20 :height 20 :fill \"#9bcd6f\"}]\n    ;; Sheep 1 (simplified side view)\n    [:ellipse {:cx 5 :cy 7 :rx 2.5 :ry 2 :fill \"#ffffff\"}]  ; body\n    [:circle {:cx 3.5 :cy 6.5 :r 1.2 :fill \"#ffffff\"}]      ; head\n    [:circle {:cx 3 :cy 6.2 :r 0.3 :fill \"#333\"}]           ; eye\n    [:rect {:x 4.5 :y 8.5 :width 0.4 :height 1.2 :fill \"#333\"}]  ; leg front\n    [:rect {:x 6 :y 8.5 :width 0.4 :height 1.2 :fill \"#333\"}]    ; leg back\n    ;; Sheep 2\n    [:ellipse {:cx 15 :cy 5 :rx 2.5 :ry 2 :fill \"#ffffff\"}]\n    [:circle {:cx 13.5 :cy 4.5 :r 1.2 :fill \"#ffffff\"}]\n    [:circle {:cx 13 :cy 4.2 :r 0.3 :fill \"#333\"}]\n    [:rect {:x 14.5 :y 6.5 :width 0.4 :height 1.2 :fill \"#333\"}]\n    [:rect {:x 16 :y 6.5 :width 0.4 :height 1.2 :fill \"#333\"}]\n    ;; Sheep 3\n    [:ellipse {:cx 10 :cy 15 :rx 2.5 :ry 2 :fill \"#ffffff\"}]\n    [:circle {:cx 8.5 :cy 14.5 :r 1.2 :fill \"#ffffff\"}]\n    [:circle {:cx 8 :cy 14.2 :r 0.3 :fill \"#333\"}]\n    [:rect {:x 9.5 :y 16.5 :width 0.4 :height 1.2 :fill \"#333\"}]\n    [:rect {:x 11 :y 16.5 :width 0.4 :height 1.2 :fill \"#333\"}]]\n\n   ;; Ore pattern - larger angular rocks\n   [:pattern {:id \"ore-pattern\" :width 20 :height 20 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 20 :height 20 :fill \"#7c7c7c\"}]\n    ;; Rock 1\n    [:polygon {:points \"3,6 7,3 9,7 5,9\" :fill \"#5c5c5c\"}]\n    [:polygon {:points \"5,4 7,3 8,5\" :fill \"#9c9c9c\"}]\n    ;; Rock 2\n    [:polygon {:points \"13,4 17,2 18,6 14,8\" :fill \"#5c5c5c\"}]\n    [:polygon {:points \"14,3 17,2 17,5\" :fill \"#9c9c9c\"}]\n    ;; Rock 3\n    [:polygon {:points \"4,14 8,12 10,16 6,17\" :fill \"#5c5c5c\"}]\n    [:polygon {:points \"6,13 8,12 9,14\" :fill \"#9c9c9c\"}]]\n\n   ;; Desert pattern - plain sandy texture\n   [:pattern {:id \"desert-pattern\" :width 20 :height 20 :patternUnits \"userSpaceOnUse\"}\n    [:rect {:width 20 :height 20 :fill \"#d4c4a0\"}]\n    ;; Sand texture dots\n    [:circle {:cx 2 :cy 2 :r 0.5 :fill \"#c4b490\"}]\n    [:circle {:cx 18 :cy 8 :r 0.5 :fill \"#c4b490\"}]\n    [:circle {:cx 7 :cy 18 :r 0.5 :fill \"#c4b490\"}]\n    [:circle {:cx 15 :cy 15 :r 0.5 :fill \"#c4b490\"}]\n    [:circle {:cx 10 :cy 5 :r 0.5 :fill \"#c4b490\"}]]])\n\n(defn hex-tile\n  \"Renders a single hexagonal tile as an SVG polygon.\n   hex-data: {:coord [q r] :resource keyword :number int}\"\n  [hex-data]\n  (let [{:keys [coord resource number]} hex-data\n        hex-size db/hex-size\n        vertices (hex-utils/hex-vertices coord hex-size)\n        points (hex-utils/vertices-to-svg-points vertices)\n        [cx cy] (hex-utils/hex-center coord hex-size)\n        ;; Get fill - use pattern if available, otherwise solid color\n        fill (if resource\n               (str \"url(#\" (name resource) \"-pattern)\")\n               (resources/get-resource-color resource))]\n    [:g {:key (str \"hex-\" (first coord) \"-\" (second coord))}\n     ;; Hex polygon with pattern\n     [:polygon\n      {:points points\n       :fill fill\n       :stroke \"#ffffff\"\n       :stroke-width 6}]\n\n     ;; Desert cactus emoji overlay\n     (when (= resource :desert)\n       [:text\n        {:x cx\n         :y cy\n         :text-anchor \"middle\"\n         :dominant-baseline \"middle\"\n         :font-size 28\n         :style {:filter \"drop-shadow(2px 2px 3px rgba(0,0,0,0.3))\"}}\n        \"\ud83c\udf35\"])\n\n     ;; Number token\n     (when number\n       (let [is-red? (numbers/is-red-number? number)\n             pips (numbers/get-probability-pips number)]\n         [:g\n          ;; Circle background\n          [:circle\n           {:cx cx\n            :cy cy\n            :r 18\n            :fill (if is-red? \"#d32f2f\" \"#f5f5dc\")\n            :stroke \"#333\"\n            :stroke-width 2}]\n\n          ;; Number text\n          [:text\n           {:x cx\n            :y (- cy 3)\n            :text-anchor \"middle\"\n            :dominant-baseline \"middle\"\n            :fill (if is-red? \"#ffffff\" \"#333\")\n            :font-size 20\n            :font-weight \"bold\"\n            :font-family \"Arial, sans-serif\"}\n           (str number)]\n\n          ;; Probability pips\n          [:g\n           (for [i (range pips)]\n             ^{:key i}\n             [:circle\n              {:cx (+ cx (* (- i (/ (dec pips) 2)) 3))\n               :cy (+ cy 10)\n               :r 1.5\n               :fill (if is-red? \"#ffffff\" \"#333\")}])]]))]))\n\n(defn harbor-icon\n  \"Renders a harbor icon at the specified position\"\n  [harbor-data]\n  (let [{:keys [edge direction type land-hex]} harbor-data\n        hex-size db/hex-size\n        ;; Calculate midpoint of the edge\n        [coord1 coord2] edge\n        [x1 y1] (hex-utils/axial-to-pixel coord1 hex-size)\n        [x2 y2] (hex-utils/axial-to-pixel coord2 hex-size)\n        mid-x (/ (+ x1 x2) 2)\n        mid-y (/ (+ y1 y2) 2)\n        ;; Get harbor properties\n        ratio (harbors/get-harbor-ratio type)\n        color (harbors/get-harbor-color type)\n        ;; Resource icon for specific harbors\n        resource-icon (when (not= type :generic)\n                        (case type\n                          :wood \"\ud83c\udf32\"\n                          :brick \"\ud83e\uddf1\"\n                          :wheat \"\ud83c\udf3e\"\n                          :sheep \"\ud83d\udc11\"\n                          :ore \"\u26f0\ufe0f\"\n                          \"\"))]\n    [:g {:key (str \"harbor-\" (first coord1) \"-\" (second coord1))}\n     ;; Harbor circle background\n     [:circle\n      {:cx mid-x\n       :cy mid-y\n       :r 20\n       :fill color\n       :stroke \"#ffffff\"\n       :stroke-width 3\n       :opacity 0.9}]\n\n     ;; Trade ratio text\n     [:text\n      {:x mid-x\n       :y (if resource-icon (- mid-y 5) mid-y)\n       :text-anchor \"middle\"\n       :dominant-baseline \"middle\"\n       :fill \"#ffffff\"\n       :font-size 16\n       :font-weight \"bold\"\n       :font-family \"Arial, sans-serif\"}\n      (str ratio \":1\")]\n\n     ;; Resource icon for specific harbors\n     (when resource-icon\n       [:text\n        {:x mid-x\n         :y (+ mid-y 10)\n         :text-anchor \"middle\"\n         :dominant-baseline \"middle\"\n         :font-size 14}\n        resource-icon])]))\n\n(defn hex-grid\n  \"Renders the complete hex grid.\n   hexes: vector of hex data maps\n   harbors: vector of harbor data maps\"\n  [hexes harbors]\n  (let [hex-size db/hex-size\n        ;; Calculate SVG viewBox to center the board\n        ;; The grid spans from -2 to 2 in both q and r\n        ;; Calculate pixel bounds\n        all-coords (map :coord hexes)\n        all-pixels (map #(hex-utils/axial-to-pixel % hex-size) all-coords)\n        min-x (apply min (map first all-pixels))\n        max-x (apply max (map first all-pixels))\n        min-y (apply min (map second all-pixels))\n        max-y (apply max (map second all-pixels))\n        ;; Add padding\n        padding (* hex-size 2)\n        view-x (- min-x padding)\n        view-y (- min-y padding)\n        view-width (+ (- max-x min-x) (* padding 2))\n        view-height (+ (- max-y min-y) (* padding 2))]\n    [:svg\n     {:viewBox (str view-x \" \" view-y \" \" view-width \" \" view-height)\n      :width \"100%\"\n      :height \"100%\"\n      :style {:max-width \"1200px\"\n              :max-height \"800px\"}}\n     ;; Pattern definitions\n     [resource-pattern]\n     ;; Hexes\n     [:g\n      (for [hex-data hexes]\n        ^{:key (str \"hex-\" (-> hex-data :coord first) \"-\" (-> hex-data :coord second))}\n        [hex-tile hex-data])]\n     ;; Harbors\n     [:g\n      (for [harbor-data harbors]\n        ^{:key (str \"harbor-\" (-> harbor-data :edge first first) \"-\" (-> harbor-data :edge first second))}\n        [harbor-icon harbor-data])]]))\n"]}